<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>ECUnionSDKDoc</title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_859455_eaq7v6w8ktj.css">
<meta name="generator" content="Hexo 5.2.0"></head>
<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link" >
                首页
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                归档
            </a>
            

            

            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">ECUnionSDKDev's Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">首页</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">归档</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">标签</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">关于</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    <article class="post-whole">
        <div class="post-title">
            <h2 class="title"></h2>
            <div class="post-meta">
                <span class="post-time">2020-11-27</span>
                
                <span class="post-visit"> 阅读次数：<span id="busuanzi_value_page_pv"></span></span>
            </div>
        </div>
        <div class="post-toc" id="post-toc">
    <strong class="post-toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ECUnionSDK%E6%8E%A5%E5%85%A5%E6%96%87%E6%A1%A3-1-0-8"><span class="toc-text">ECUnionSDK接入文档(1.0.8)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E6%96%B9%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8E%A5%E5%A5%BD%E6%8E%A5%E5%8F%A3%EF%BC%8CSDK%E8%A6%81%E6%88%91%E6%96%B9%E4%BA%8C%E6%AC%A1%E6%89%93%E5%8C%85%E5%90%8E%E6%89%8D%E4%BC%9A%E7%94%9F%E6%95%88%E3%80%82"><span class="toc-text">接入方只需要接好接口，SDK要我方二次打包后才会生效。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AF%B4%E6%98%8E"><span class="toc-text">1.说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-SDK%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BA%8C%E9%80%89%E4%B8%80%E5%8D%B3%E5%8F%AF"><span class="toc-text">2.搭建开发环境 (SDK环境搭建二选一即可)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-SDK%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-text">2.1 SDK本地搭建方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-SDK%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%90%AD%E5%BB%BA%E6%96%B9%E5%BC%8F%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">2.2 SDK远程仓库搭建方式（推荐）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-SDK%E7%9A%84Application%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E5%BF%85%E6%8E%A5%EF%BC%89"><span class="toc-text">3.1 SDK的Application初始化（必接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-SDK%E4%B8%BBactivity%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E5%BF%85%E6%8E%A5%EF%BC%89"><span class="toc-text">3.2 SDK主activity初始化（必接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%BC%80%E5%B1%8F%E5%B9%BF%E5%91%8A"><span class="toc-text">3.3 开屏广告</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1%E5%BC%80%E5%B1%8F%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89Activity%E7%BB%A7%E6%89%BFECSplashActivity%E6%9D%A5%E5%B1%95%E7%A4%BA%E9%97%AA%E5%B1%8F%E3%80%82%E6%8E%A8%E8%8D%90%E6%AD%A4%E6%96%B9%E5%BC%8F%E6%8E%A5%E5%85%A5%E9%97%AA%E5%B1%8F%EF%BC%81"><span class="toc-text">3.3.1开屏接入方式一：自定义Activity继承ECSplashActivity来展示闪屏。推荐此方式接入闪屏！</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2%E5%BC%80%E5%B1%8F%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E5%8E%9F%E7%94%9Factivity%E4%B8%AD%E8%B0%83%E7%94%A8%E9%97%AA%E5%B1%8F%E6%8E%A5%E5%8F%A3%E5%B1%95%E7%A4%BA%E9%97%AA%E5%B1%8F"><span class="toc-text">3.3.2开屏接入方式二：原生activity中调用闪屏接口展示闪屏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%B9%BF%E5%91%8A%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.4 广告接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E5%B9%BF%E5%91%8A%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E"><span class="toc-text">3.4.1 广告类型说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E5%B9%BF%E5%91%8A%E5%9B%9E%E8%B0%83%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E"><span class="toc-text">3.5 广告回调接口说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%BF%80%E5%8A%B1%E8%A7%86%E9%A2%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E5%A5%96%E5%8A%B1%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E%EF%BC%88%E4%BD%BF%E7%94%A8loadAndShowAd%E6%8E%A5%E5%8F%A3%E6%89%8D%E6%8E%A5%E5%85%A5%EF%BC%89"><span class="toc-text">3.6 激励视频服务器发奖励接口说明（使用loadAndShowAd接口才接入）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%80%80%E5%87%BA%E6%8E%A5%E5%8F%A3%EF%BC%88%E5%BF%85%E6%8E%A5%EF%BC%89"><span class="toc-text">4 退出接口（必接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3%EF%BC%88%E5%BF%85%E6%8E%A5%EF%BC%89"><span class="toc-text">5 登录接口（必接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%80%89%E6%8E%A5%EF%BC%89"><span class="toc-text">6 支付接口（选接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E8%A1%A5%E5%8D%95%E6%8E%A5%E5%8F%A3%EF%BC%88%E5%A6%82%E6%9E%9C%E6%9C%89%E6%94%AF%E4%BB%98%E5%BF%85%E6%8E%A5%EF%BC%89"><span class="toc-text">7  补单接口（如果有支付必接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E8%B7%B3%E8%BD%AC%E5%88%B0%E7%89%B9%E5%AE%9A%E5%8C%BA%E5%9F%9F%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%AF%94%E5%A6%82%EF%BC%9AOPPO%E7%9A%84%E8%B6%85%E4%BC%91%E9%97%B2%E4%B8%93%E5%8C%BA%EF%BC%88%E5%A6%82%E6%9C%89%E8%A6%81%E6%B1%82%EF%BC%8C%E8%AF%B7%E6%8E%A5%E5%85%A5%EF%BC%89"><span class="toc-text">8  跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%8A%E6%8A%A5%E7%94%A8%E6%88%B7%E6%B8%B8%E6%88%8F%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3%EF%BC%88%E5%A6%82%E6%9C%89%E8%A6%81%E6%B1%82%EF%BC%8C%E8%AF%B7%E6%8E%A5%E5%85%A5%EF%BC%89"><span class="toc-text">9  上报用户游戏信息接口（如有要求，请接入）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%A1%E6%95%B0%E4%BA%8B%E4%BB%B6%E7%BB%9F%E8%AE%A1%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%80%89%E6%8E%A5%EF%BC%89"><span class="toc-text">10  自定义计数事件统计接口（选接）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%A1%E7%AE%97%E4%BA%8B%E4%BB%B6%E7%BB%9F%E8%AE%A1%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%80%89%E6%8E%A5%EF%BC%89"><span class="toc-text">11  自定义计算事件统计接口（选接）</span></a></li></ol></li></ol></li></ol>
    <div class="back-to-top" id="back-to-top">
        <a href="javascript:void(0);">回到顶部</a>
    </div>
</div>
        <div class="post-content">
            <h1 id="ECUnionSDK接入文档-1-0-8"><a href="#ECUnionSDK接入文档-1-0-8" class="headerlink" title="ECUnionSDK接入文档(1.0.8)"></a>ECUnionSDK接入文档(1.0.8)</h1><h2 id="接入方只需要接好接口，SDK要我方二次打包后才会生效。"><a href="#接入方只需要接好接口，SDK要我方二次打包后才会生效。" class="headerlink" title="接入方只需要接好接口，SDK要我方二次打包后才会生效。"></a>接入方只需要接好接口，SDK要我方二次打包后才会生效。</h2><h3 id="1-说明"><a href="#1-说明" class="headerlink" title="1.说明"></a>1.说明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.当你检查确认接入无误后（确认接口有调用到），将接好包体传给我方人员。</span><br><span class="line">2.接入方不需要考虑应用权限适配，SDK内部逻辑已经适配处理</span><br><span class="line">3.一个广告位id对应一个广告实例。不可以一个广告实例使用多个广告位id。</span><br><span class="line">4.类文件所在路径不要使用包名作为路径，因为在二次打包时修改包名会出问题。比如包名为com.aaa.bbb、类名为MainActivtiy.java。类路径就不能为com.aaa.bbb.MainActivtiy.java。如果出现该情况，请重新命名路径。</span><br></pre></td></tr></table></figure>
<a id="more"></a>

<h3 id="2-搭建开发环境-SDK环境搭建二选一即可"><a href="#2-搭建开发环境-SDK环境搭建二选一即可" class="headerlink" title="2.搭建开发环境 (SDK环境搭建二选一即可)"></a>2.搭建开发环境 (SDK环境搭建二选一即可)</h3><h4 id="2-1-SDK本地搭建方式"><a href="#2-1-SDK本地搭建方式" class="headerlink" title="2.1 SDK本地搭建方式"></a>2.1 SDK本地搭建方式</h4><p>1)拷贝libs目录的SDK文件到您项目的libs目录下。</p>
<p>2)配置AndroidManifest.xml</p>
<p>2.1)添加权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.INTERNET&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.permission.READ_PHONE_STATE&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>3)请务必确保工程的模块级build.gradle文件里的包含以下依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    //引入sdk依赖</span><br><span class="line">    implementation &#x27;com.android.support:appcompat-v7:28.0.0&#x27;</span><br><span class="line">    implementation &#x27;com.android.support.constraint:constraint-layout:1.1.3&#x27;</span><br><span class="line">    implementation &#x27;com.android.support:design:28.0.0&#x27;</span><br><span class="line">	implementation &#x27;com.android.support:recyclerview-v7:28.0.0&#x27;</span><br><span class="line">    implementation &#x27;pl.droidsonroids.gif:android-gif-drawable:1.2.18&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4)请在AndroidManifest在application的标签中给游戏加上硬件加速：如</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">        android:hardwareAccelerated=&quot;true&quot;&gt;</span><br><span class="line">        ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>5)minSdkVersion最小值需要19以上。</p>
<h4 id="2-2-SDK远程仓库搭建方式（推荐）"><a href="#2-2-SDK远程仓库搭建方式（推荐）" class="headerlink" title="2.2 SDK远程仓库搭建方式（推荐）"></a>2.2 SDK远程仓库搭建方式（推荐）</h4><ul>
<li><strong>国外网络环境（网络环境二选一）</strong></li>
</ul>
<p>步骤1: 在项目的根build.gradle中，找到对应标签标签，添加远程库地址<br> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> allprojects &#123;</span><br><span class="line">    repositories &#123;	</span><br><span class="line">        maven &#123; url &#x27;https://jitpack.io&#x27; &#125;//就是这货</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>步骤2:找到游戏导出的游戏模块工程，找到对应的模块build.gradle,找到对应的标签，添加依赖<br> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> dependencies &#123;</span><br><span class="line">	</span><br><span class="line">implementation &#x27;com.github.MarsSDKDev:ECUnionSDK:1.0.8&#x27; //这行是SDK的依赖，有更新的时候，会通知更改版本号即可。</span><br><span class="line">implementation &#x27;com.github.MarsSDKDev:ECUnionSDKHelper:0.0.8&#x27;//这行是辅助测试的模块，加入后可以有测试广告呼出，运营人员需要出母包的时候，!!!记得把这行注释!!!</span><br><span class="line"></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>国内网络环境（网络环境二选一）</strong></li>
</ul>
<p>步骤1: 在项目的根build.gradle中，找到对应标签标签，添加远程库地址<br> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenLocal()</span><br><span class="line">        maven&#123; url &#x27;https://maven.aliyun.com/repository/jcenter&#x27;&#125;</span><br><span class="line">        maven&#123; url &#x27;https://maven.aliyun.com/repository/google&#x27;&#125;</span><br><span class="line">        maven &#123; url &#x27;https://maven.aliyun.com/repository/public&#x27; &#125;</span><br><span class="line">        mavenCentral()</span><br><span class="line">        maven &#123; url &#x27;https://jitpack.io&#x27; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenLocal()</span><br><span class="line">        maven&#123; url &#x27;https://maven.aliyun.com/repository/jcenter&#x27;&#125;</span><br><span class="line">        maven&#123; url &#x27;https://maven.aliyun.com/repository/google&#x27;&#125;</span><br><span class="line">        maven &#123; url &#x27;https://maven.aliyun.com/repository/public&#x27; &#125;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p> 步骤2:与国外网络环境的步骤2一致</p>
<p>完成环境的搭建后，在android studio中同步项目(android studio工具栏中有有一个’Sync Project’的按钮,点击一下即可)<br><strong>再次提醒，出母包的时候，需要把测试模块注释，以免造成来回出包</strong></p>
<h3 id="3-1-SDK的Application初始化（必接）"><a href="#3-1-SDK的Application初始化（必接）" class="headerlink" title="3.1 SDK的Application初始化（必接）"></a>3.1 SDK的Application初始化（必接）</h3><p>ECUnionSDK类:</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public static void attachBaseContext(Application application)</td>
<td>SDK初始化，在Application子类的attachBaseContext方法中调用,传入application</td>
</tr>
<tr>
<td>public static void onApplicationCreate(Application application)</td>
<td>SDK初始化，在Application子类的onApplicationCreate方法中调用,传入application</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">自定义您的Application，调用示例如下:</span><br><span class="line">注意：</span><br><span class="line">接口调用的位置不能错。</span><br><span class="line">要在Androidmanifest里的application标签的android:name属性设置该类，否则该类不被使用。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ec.union.ecu.pub.ECUnionSDK;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意：要在Androidmanifest里的application标签的android:name属性设置该类，否则该类不被使用。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameApp</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">attachBaseContext</span><span class="params">(Context base)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.attachBaseContext(base);</span><br><span class="line">        <span class="comment">//1.application初始化</span></span><br><span class="line">        ECUnionSDK.attachBaseContext(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        <span class="comment">//2.application初始化</span></span><br><span class="line">        ECUnionSDK.onApplicationCreate(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h3 id="3-2-SDK主activity初始化（必接）"><a href="#3-2-SDK主activity初始化（必接）" class="headerlink" title="3.2 SDK主activity初始化（必接）"></a>3.2 SDK主activity初始化（必接）</h3><p>ECUnionSDK类:</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public static void onMainActivityCreate(Activity activity)</td>
<td>主activity初始化接口</td>
</tr>
<tr>
<td>public static void onResume(Activity activity)</td>
<td>当activity在界面上展示时，广告处理相应逻辑</td>
</tr>
<tr>
<td>public static void onPause(Activity activity)</td>
<td>当activity失去焦点暂停时，广告处理对应逻辑</td>
</tr>
<tr>
<td>public static void onStop(Activity activity)</td>
<td>当activity停止时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public static void onDestroy(Activity activity)</td>
<td>当activity被销毁时，并回收相应资源</td>
</tr>
<tr>
<td>public static void onStart(Activity activity)</td>
<td>当activity启动时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public static void onRestart(Activity activity)</td>
<td>当activity重新启动时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public static void onNewIntent(Activity activity)</td>
<td>当activity接受新的intent，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public static void void onActivityResult(Activity activity,int requestCode, int resultCode, Intent data)</td>
<td>进入到权限界面申请权限后返回activity，权限结果回调</td>
</tr>
<tr>
<td>public static void onRequestPermissionsResult(Activity activity,int requestCode, String[] permissions,  int[] grantResults)</td>
<td>申请权限结果回调</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请在应用（游戏）主activity对应的方法里调用SDK接口。</span><br></pre></td></tr></table></figure>


<p>如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//3.主activity初始化</span></span><br><span class="line">        ECUnionSDK.onMainActivityCreate(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">        ECUnionSDK.onStart(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRestart();</span><br><span class="line">        ECUnionSDK.onRestart(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        ECUnionSDK.onResume(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        ECUnionSDK.onPause(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        ECUnionSDK.onStop(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        ECUnionSDK.onDestroy(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onNewIntent(intent);</span><br><span class="line">        ECUnionSDK.onNewIntent(<span class="keyword">this</span>, intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        ECUnionSDK.onActivityResult(<span class="keyword">this</span>, requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">        ECUnionSDK.onRequestPermissionsResult(<span class="keyword">this</span>, requestCode, permissions, grantResults);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="3-3-开屏广告"><a href="#3-3-开屏广告" class="headerlink" title="3.3 开屏广告"></a>3.3 开屏广告</h3><p>ECSplashMgr类:</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public void createSplash(IECAdListener listener)</td>
<td>创建开屏,传入广告侦听器</td>
</tr>
<tr>
<td>public void showSplash(String posId)</td>
<td>开屏创建完成后，展示开屏，传入广告位id</td>
</tr>
<tr>
<td>public void onCreate(Activity activity, Bundle savedInstanceState)</td>
<td>此activity添加闪屏作为入口activity,初始化广告相关参数</td>
</tr>
<tr>
<td>public void onResume()</td>
<td>当activity在界面上展示时，广告处理相应逻辑</td>
</tr>
<tr>
<td>public void onPause()</td>
<td>当activity失去焦点暂停时，广告处理对应逻辑</td>
</tr>
<tr>
<td>public void onStop()</td>
<td>当activity停止时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onDestroy()</td>
<td>当activity被销毁时，并回收相应资源</td>
</tr>
<tr>
<td>public void onStart()</td>
<td>当activity开始时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onRestart()</td>
<td>当activity重新开始时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onNewIntent()</td>
<td>当activity接受新的intent，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onSaveInstanceState()</td>
<td>保存activity状态，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onConfigurationChanged()</td>
<td>当Configuration发生变化，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void void onActivityResult(int requestCode, int resultCode, Intent data)</td>
<td>进入到权限界面申请权限后返回activity，权限结果回调</td>
</tr>
<tr>
<td>public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults)</td>
<td>申请权限结果回调</td>
</tr>
<tr>
<td>public boolean onKeyDown(int keyCode, KeyEvent event)</td>
<td>闪屏，屏蔽返回键</td>
</tr>
<tr>
<td>public void setSplashEntryClsNm(String className)</td>
<td>在展示之前调用，传入要跳转的activity的全类名</td>
</tr>
</tbody></table>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">1.闪屏activity必须创建一个单独的activity承托,不能跟应用主activity混在一起，闪屏结束后会自动跳转，接入方不要做跳转操作。</span><br><span class="line">2.闪屏activity在androidmanifest里要指定好方向（横屏或竖屏）。</span><br><span class="line">3.HbSplashMgr.getInstance().setSplashEntryClsNm(); //设置开屏广告结束后要跳转的activity全类名，务必在调用开屏展示接口之前调用。</span><br><span class="line">4.创建的开屏activity要在Androidmanifest里的application标签里注册，否则会出错。</span><br><span class="line">        &lt;activity</span><br><span class="line">            android:name=&quot;com.xxx.xxx.GameSplashActivity&quot;</span><br><span class="line">            android:configChanges=&quot;keyboard|keyboardHidden|navigation|orientation|screenSize|screenLayout&quot;</span><br><span class="line">            android:screenOrientation=&quot;portrait&quot;</span><br><span class="line">            android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot;&gt;</span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--这个intent-filter表示该activity是启动界面，在Androidmanifest里请保持唯一，不能有多个--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h4 id="3-3-1开屏接入方式一：自定义Activity继承ECSplashActivity来展示闪屏。推荐此方式接入闪屏！"><a href="#3-3-1开屏接入方式一：自定义Activity继承ECSplashActivity来展示闪屏。推荐此方式接入闪屏！" class="headerlink" title="3.3.1开屏接入方式一：自定义Activity继承ECSplashActivity来展示闪屏。推荐此方式接入闪屏！"></a>3.3.1开屏接入方式一：自定义Activity继承ECSplashActivity来展示闪屏。推荐此方式接入闪屏！</h4><p>示例如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.Nullable;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.ec.union.ad.sdk.api.ECSplashActivity;</span><br><span class="line"><span class="keyword">import</span> com.ec.union.ad.sdk.api.ECSplashMgr;</span><br><span class="line"><span class="keyword">import</span> com.ec.union.ad.sdk.platform.ECAdError;</span><br><span class="line"><span class="keyword">import</span> com.ec.union.ad.sdk.platform.IECAdListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameSplashActivity</span> <span class="keyword">extends</span> <span class="title">ECSplashActivity</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = GameSplashActivity.class.getSimpleName();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//展示开屏广告之前,先创建</span></span><br><span class="line">        ECSplashMgr.getInstance().createSplash(<span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdShow&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdReady&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdClick&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdDismissed&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdReward&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置开屏广告结束后要跳转的activity全类名</span></span><br><span class="line">        <span class="comment">//GameMainActivity.class.getName() MainActivity代指主界面activity。请修改为真正的主activity。</span></span><br><span class="line">        ECSplashMgr.getInstance().setSplashEntryClsNm(GameMainActivity.class.getName());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//展示开屏广告</span></span><br><span class="line">        showSplash();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showSplash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//广告位id,展示广告</span></span><br><span class="line">        <span class="comment">//请填写真正的广告位id</span></span><br><span class="line">        <span class="comment">//AdConstant是用来管理广告位id的。该类可以在demo里找到来使用。</span></span><br><span class="line">        ECSplashMgr.getInstance().showSplash(AdConstant.SPLASH_ID);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-2开屏接入方式二：原生activity中调用闪屏接口展示闪屏"><a href="#3-3-2开屏接入方式二：原生activity中调用闪屏接口展示闪屏" class="headerlink" title="3.3.2开屏接入方式二：原生activity中调用闪屏接口展示闪屏"></a>3.3.2开屏接入方式二：原生activity中调用闪屏接口展示闪屏</h4><p>示例如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">GameSplashActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//activity初始化</span></span><br><span class="line">        ECSplashMgr.getInstance().onCreate(<span class="keyword">this</span>, savedInstanceState);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//展示开屏广告之前,先创建</span></span><br><span class="line">        ECSplashMgr.getInstance().createSplash(<span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdShow&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdReady&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdClick&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdDismissed&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">&quot;splash onAdReward&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置开屏广告结束后要跳转的activity全类名</span></span><br><span class="line">        <span class="comment">//GameMainActivity.class.getName() MainActivity代指主界面activity。请修改为真正的主activity。</span></span><br><span class="line">        ECSplashMgr.getInstance().setSplashEntryClsNm(GameMainActivity.class.getName());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//展示开屏广告</span></span><br><span class="line">        showSplash();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showSplash</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//广告位id,展示广告</span></span><br><span class="line">        <span class="comment">//请填写真正的广告位id</span></span><br><span class="line">        ECSplashMgr.getInstance().showSplash(AdConstant.SPLASH_ID);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        ECSplashMgr.getInstance().onResume();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        ECSplashMgr.getInstance().onPause();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        ECSplashMgr.getInstance().onStop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        ECSplashMgr.getInstance().onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ECSplashMgr.getInstance().onStart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       ECSplashMgr.getInstance().onRestart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">       ECSplashMgr.getInstance().onNewIntent(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">       ECSplashMgr.getInstance().onSaveInstanceState(outState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">       ECSplashMgr.getInstance().onConfigurationChanged(newConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        ECSplashMgr.getInstance().onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="meta">@NonNull</span> String[] permissions, <span class="meta">@NonNull</span> <span class="keyword">int</span>[] grantResults)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">        ECSplashMgr.getInstance().onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyDown</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> <span class="keyword">var</span> = ECSplashMgr.getInstance().onKeyDown(keyCode, event);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">var</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.onKeyDown(keyCode, event);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">var</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="3-4-广告接口"><a href="#3-4-广告接口" class="headerlink" title="3.4 广告接口"></a>3.4 广告接口</h3><p> ECAd类</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>public ECAd(Activity activity, IECAdListener listener, ECAdType adType)</td>
<td>广告加载类构造函数,传入activity，广告侦听器，广告类型</td>
</tr>
<tr>
<td>public void showAd(String posId)</td>
<td>传入广告位id， 展示对应广告类型</td>
</tr>
<tr>
<td>public void loadAd(String posId)</td>
<td>传入广告位id，加载视频广告。用于视频类型（FUllVIDEO，REWARDVIDEO）广告的预加载</td>
</tr>
<tr>
<td>public void loadAndShowAd(String posId,Map&lt;String,String&gt; param)</td>
<td>此接口只用于激励视频类型，用于服务端发奖励， 传入广告位id，服务端的发奖励参数(在3.6节说明Map参数)</td>
</tr>
<tr>
<td>public boolean isReady()</td>
<td>判断视频广告是否加载完成。</td>
</tr>
<tr>
<td>public void setVisibility(boolean)</td>
<td>设置广告是否可见，默认为true，true为显示。false为隐藏 。用于feed，infeed和banner类型的广告</td>
</tr>
<tr>
<td>public void onResume()</td>
<td>当activity在界面上展示时，广告处理相应逻辑</td>
</tr>
<tr>
<td>public void onPause()</td>
<td>当activity失去焦点暂停时，广告处理对应逻辑</td>
</tr>
<tr>
<td>public void onStop()</td>
<td>当activity停止时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onDestroy()</td>
<td>当activity被销毁时，清理广告，并回收广告相应资源</td>
</tr>
<tr>
<td>public void onStart()</td>
<td>当activity开始时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onRestart()</td>
<td>当activity重新开始时，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onNewIntent()</td>
<td>当activity接受新的intent，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onSaveInstanceState()</td>
<td>保存activity状态，广告进行处理相应逻辑</td>
</tr>
<tr>
<td>public void onConfigurationChanged()</td>
<td>当Configuration发生变化，广告进行处理相应逻辑</td>
</tr>
</tbody></table>
<h4 id="3-4-1-广告类型说明"><a href="#3-4-1-广告类型说明" class="headerlink" title="3.4.1 广告类型说明"></a>3.4.1 广告类型说明</h4><table>
<thead>
<tr>
<th>广告类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ECAdType.BANNER</td>
<td>横幅</td>
</tr>
<tr>
<td>ECAdType.INTERSTITIAL</td>
<td>插屏</td>
</tr>
<tr>
<td>ECAdType.INFEED</td>
<td>贴片</td>
</tr>
<tr>
<td>ECAdType.FEED</td>
<td>信息流</td>
</tr>
<tr>
<td>ECAdType.REWARDVIDEO</td>
<td>激励视频</td>
</tr>
<tr>
<td>ECAdType.FULLVIDEO</td>
<td>全屏视频</td>
</tr>
</tbody></table>
<h3 id="3-5-广告回调接口说明"><a href="#3-5-广告回调接口说明" class="headerlink" title="3.5 广告回调接口说明"></a>3.5 广告回调接口说明</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IECAdListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span></span>; <span class="comment">//广告展示时回调</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span></span>; <span class="comment">//失败回调</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span></span>;<span class="comment">//广告加载准备好回调</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span></span>;<span class="comment">//点击广告回调</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span></span>;<span class="comment">//关闭广告回调</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span></span>;<span class="comment">//广告奖励回调，用于视频广告在观看完广告后回调接入方发起奖励给用户</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="3-6-激励视频服务器发奖励接口说明（使用loadAndShowAd接口才接入）"><a href="#3-6-激励视频服务器发奖励接口说明（使用loadAndShowAd接口才接入）" class="headerlink" title="3.6 激励视频服务器发奖励接口说明（使用loadAndShowAd接口才接入）"></a>3.6 激励视频服务器发奖励接口说明（使用loadAndShowAd接口才接入）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String&gt; gameParams = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</span><br><span class="line">      gameParams.put(GameParam.REWARD_NAME.getValue(),<span class="string">&quot;五十金币&quot;</span>);<span class="comment">//奖励名称</span></span><br><span class="line">      gameParams.put(GameParam.REWARD_AMOUNT.getValue(),<span class="string">&quot;2&quot;</span>);<span class="comment">//奖励数量</span></span><br><span class="line">      gameParams.put(GameParam.USER_ID.getValue(),<span class="string">&quot;my_useid&quot;</span>);<span class="comment">//用户id</span></span><br><span class="line">      gameParams.put(GameParam.EXTRA.getValue(),<span class="string">&quot;&#123;\&quot;reward_id\&quot;:\&quot;8234899234823948394723\&quot;&#125;&quot;</span>);<span class="comment">//游戏扩展参数，使用json格式传输，包含与服务器约定的参数，请自定义。</span></span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意:</span><br><span class="line">1.示例中的生命周期回调函数请务必调用</span><br><span class="line">2.广告接口请在主activity里使用。</span><br></pre></td></tr></table></figure>

<p>广告接口示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameMainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdConstant</span> </span>&#123;</span><br><span class="line">        <span class="comment">//请填写真正的广告位id</span></span><br><span class="line">        <span class="comment">//开屏广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SPLASH_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//插屏广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String INTERSTITIAL_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//banner广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String BANNER_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//激励视频广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String REWARDVIDEO_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//全屏视频广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String FULLVIDEO_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//信息流广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String FEED_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//贴片广告位</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String INFEED_ID = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = GameMainActivity.class.getSimpleName();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> GameMainActivity mGameMainActivity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//banner（横幅）广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd bannerAd;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mBannerIsShow;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//插屏广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd interstitialAd;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//激励视频广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd rewardVideoAd;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> mRewardVideoTime = <span class="number">0</span>;<span class="comment">//记录激励视频当前时间</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//全屏视频广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd fullVideoAd;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> mFullVideoTime = <span class="number">0</span>;<span class="comment">//记录全屏视频当前时间</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//信息流广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd feedAd;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mFeedIsShow;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//贴片广告</span></span><br><span class="line">    <span class="keyword">private</span> ECAd infeedAd;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mInfeedIsShow;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        mGameMainActivity = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化广告实例</span></span><br><span class="line">        initAd();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建全部广告类型的广告实例</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//banner广告</span></span><br><span class="line">        <span class="keyword">if</span> (bannerAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdReady&quot;</span>);</span><br><span class="line">                    <span class="comment">//调用show接口广告加载完成后，根据mBannerIsShow，设置显示或隐藏</span></span><br><span class="line">                    setBannerShow(mBannerIsShow);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdDismissed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;banner onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.BANNER);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//插屏广告</span></span><br><span class="line">        <span class="keyword">if</span> (interstitialAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdReady&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdDismissed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;interstitial onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.INTERSTITIAL);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//激励视频广告</span></span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123; <span class="comment">//不能在失败回调里调用loadAd，不然很可能会造成死循环。</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123; <span class="comment">//视频已经准备好了</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdReady&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdDismissed&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//关闭广告后重新加载广告</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">null</span> != rewardVideoAd) &#123;</span><br><span class="line">                        rewardVideoAd.loadAd(AdConstant.REWARDVIDEO_ID);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="comment">//奖励视频这里发奖励，不要做任何判断，直接在这回调发奖励</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.REWARDVIDEO);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//全屏视频广告</span></span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;fullVideo onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123; <span class="comment">//不能在失败回调里调用loadAd，不然很可能会造成死循环。</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;fullVideo onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123; <span class="comment">//视频已经准备好了</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;fullVideo onAdReady&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;fullVideo onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;fullVideo onAdDismissed&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//关闭广告后重新加载广告</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">null</span> != fullVideoAd) &#123;</span><br><span class="line">                        fullVideoAd.loadAd(AdConstant.FULLVIDEO_ID);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="comment">//奖励视频这里发奖励，不要做任何判断，直接在这回调发奖励</span></span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;rewardVideo onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.FULLVIDEO);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//信息流广告</span></span><br><span class="line">        <span class="keyword">if</span> (feedAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdFailed: &quot;</span> + error.toString());</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdReady&quot;</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//调用show接口广告加载完成后，根据mFeedIsShow，设置显示或隐藏</span></span><br><span class="line">                    setFeedShow(mFeedIsShow);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdDismissed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;feed onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.FEED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//贴片广告</span></span><br><span class="line">        <span class="keyword">if</span> (infeedAd == <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd = <span class="keyword">new</span> ECAd(<span class="keyword">this</span>, <span class="keyword">new</span> IECAdListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdShow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdShow&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdFailed</span><span class="params">(ECAdError error)</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdFailed: &quot;</span> + error.toString());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdReady&quot;</span>);</span><br><span class="line">                    <span class="comment">//调用show接口广告加载完成后，根据mInfeedIsShow，设置显示或隐藏</span></span><br><span class="line">                    setInfeedShow(mInfeedIsShow);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdClick&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdDismissed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdDismissed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAdReward</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">&quot;infeed onAdReward&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, ECAdType.INFEED);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载展示信息流广告接口 ，每次showAd调用都会重新加载广告</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showFeedAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Log.i(TAG, <span class="string">&quot;展示feed广告----&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.feedAd) &#123;</span><br><span class="line">            mGameMainActivity.feedAd.showAd(AdConstant.FEED_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置是否显示信息流广告接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setFeedShow</span><span class="params">(<span class="keyword">boolean</span> isShow)</span> </span>&#123;</span><br><span class="line">        mGameMainActivity.mFeedIsShow = isShow;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.feedAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;设置feed广告Visibility：&quot;</span> + isShow);</span><br><span class="line">            mGameMainActivity.feedAd.setVisibility(isShow);<span class="comment">//控制feed隐藏显示。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载全屏视频接口，游戏加载完成后只用调用一次</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadFullVideoAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//建议接入方在恰当的时机，在游戏层控制调用加载，比如：游戏开始时，进入有视频广告的界面等，按接入方实际情况调用。</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.fullVideoAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;加载全屏视频广告----&gt;&quot;</span>);</span><br><span class="line">            mGameMainActivity.fullVideoAd.loadAd(AdConstant.FULLVIDEO_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//展示全屏视频广告接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showFullVideoAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.fullVideoAd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mGameMainActivity.fullVideoAd.isReady()) &#123; <span class="comment">//判断是否加载完毕</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;展示全屏视频广告...&quot;</span>);</span><br><span class="line">                mGameMainActivity.fullVideoAd.showAd(AdConstant.FULLVIDEO_ID);<span class="comment">//显示视频广告</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//接入方也可以在这加载视频广告。但是要限制用户不能频繁点击，加载之间要有一定的时间间隔，视视频大小和网络情况大概在3s~5s。</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;full video ad is not ready&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">long</span> curTime = System.currentTimeMillis();</span><br><span class="line">                <span class="keyword">boolean</span> isLoad = (<span class="number">0</span> == mFullVideoTime || curTime - mFullVideoTime &gt; <span class="number">3000</span>);<span class="comment">//3s后可以再加载</span></span><br><span class="line">                <span class="keyword">if</span> (isLoad) &#123;<span class="comment">//这个是安卓层的防止频繁点击处理。如果接入方在游戏层做了类似的处理，可以将这里的限制注释。</span></span><br><span class="line">                    mFullVideoTime = curTime;</span><br><span class="line">                    mGameMainActivity.fullVideoAd.loadAd(AdConstant.FULLVIDEO_ID);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载激励视频广告接口，游戏界面加载完成后只用调用一次</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadRewardVideoAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//建议接入方在恰当的时机，在游戏层控制调用加载，比如：游戏开始时，进入有视频广告的界面等，按接入方实际情况调用。</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.rewardVideoAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;加载激励视频广告----&gt;&quot;</span>);</span><br><span class="line">            mGameMainActivity.rewardVideoAd.loadAd(AdConstant.REWARDVIDEO_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//展示激励视频广告接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showRewardVideoAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.rewardVideoAd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mGameMainActivity.rewardVideoAd.isReady()) &#123; <span class="comment">//判断是否加载完毕</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;展示激励视频广告...&quot;</span>);</span><br><span class="line">                mGameMainActivity.rewardVideoAd.showAd(AdConstant.REWARDVIDEO_ID);<span class="comment">//显示视频广告</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//接入方也可以在这加载视频广告。但是要限制用户不能频繁点击，加载之间要有一定的时间间隔，视视频大小和网络情况大概在3s~5s。</span></span><br><span class="line">                Log.i(TAG, <span class="string">&quot;reward video ad is not ready&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">long</span> curTime = System.currentTimeMillis();</span><br><span class="line">                <span class="keyword">boolean</span> isLoad = (<span class="number">0</span> == mRewardVideoTime || curTime - mRewardVideoTime &gt; <span class="number">3000</span>);<span class="comment">//3s后可以再加载</span></span><br><span class="line">                <span class="keyword">if</span> (isLoad) &#123;<span class="comment">//这个是安卓层的防止频繁点击处理。如果接入方在游戏层做了类似的处理，可以将这里的限制注释。</span></span><br><span class="line">                    mRewardVideoTime = curTime;</span><br><span class="line">                    mGameMainActivity.rewardVideoAd.loadAd(AdConstant.REWARDVIDEO_ID);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载展示插屏广告接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showInterstitialAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.interstitialAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;展示插屏----&gt;&quot;</span>);</span><br><span class="line">            mGameMainActivity.interstitialAd.showAd(AdConstant.INTERSTITIAL_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载展示banner广告接口，banner会30s自动刷新</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showBanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.bannerAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;展示banner----&gt;&quot;</span>);</span><br><span class="line">            mGameMainActivity.bannerAd.showAd(AdConstant.BANNER_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//因为banner的显示需要网络请求，设置隐藏显示可能无效，所以可以在banner的onReady回调里根据mBannerIsShow设置是否显示</span></span><br><span class="line">    <span class="comment">//设置是否显示banner接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setBannerShow</span><span class="params">(<span class="keyword">boolean</span> isShow)</span> </span>&#123;</span><br><span class="line">        mGameMainActivity.mBannerIsShow = isShow;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.bannerAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;设置banner广告Visibility：&quot;</span> + isShow);</span><br><span class="line">            mGameMainActivity.bannerAd.setVisibility(isShow);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载展示贴片广告接口，每次调用刷新广告</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">showInfeedAd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.infeedAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;展示贴片广告----&gt;&quot;</span>);</span><br><span class="line">            mGameMainActivity.infeedAd.showAd(AdConstant.INFEED_ID);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置是否显示的贴片广告接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setInfeedShow</span><span class="params">(<span class="keyword">boolean</span> isShow)</span> </span>&#123;</span><br><span class="line">        mGameMainActivity.mInfeedIsShow = isShow;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != mGameMainActivity.infeedAd) &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;设置infeed广告Visibility：&quot;</span> + isShow);</span><br><span class="line">            mGameMainActivity.infeedAd.setVisibility(isShow);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onStart();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRestart();</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onRestart();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onResume();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onPause();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onStop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onDestroy();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onNewIntent</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onNewIntent(intent);</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onNewIntent(intent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onSaveInstanceState(outState);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">        <span class="keyword">if</span> (bannerAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            bannerAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (interstitialAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            interstitialAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (rewardVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            rewardVideoAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fullVideoAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            fullVideoAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (feedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            feedAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (infeedAd != <span class="keyword">null</span>) &#123;</span><br><span class="line">            infeedAd.onConfigurationChanged(newConfig);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-退出接口（必接）"><a href="#4-退出接口（必接）" class="headerlink" title="4 退出接口（必接）"></a>4 退出接口（必接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下方法即可。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchKeyEvent</span><span class="params">(KeyEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.getAction() == KeyEvent.ACTION_DOWN) &#123;</span><br><span class="line">            <span class="comment">// SDK退出接口（必接）</span></span><br><span class="line">            Log.i(TAG, <span class="string">&quot;调用退出接口----&gt;&quot;</span>);</span><br><span class="line">            ECUnionSDK.quit(<span class="keyword">this</span>, <span class="keyword">new</span> IECQuitResultListener() &#123;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onQuit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="comment">//cp 在退出前的额外操作...</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">//游戏退出</span></span><br><span class="line">                    finish();</span><br><span class="line">                    android.os.Process.killProcess(android.os.Process.myPid());</span><br><span class="line">                    System.exit(<span class="number">0</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.dispatchKeyEvent(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-登录接口（必接）"><a href="#5-登录接口（必接）" class="headerlink" title="5 登录接口（必接）"></a>5 登录接口（必接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//登录接口（必接）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//请在登录完成后加载进入游戏</span></span><br><span class="line">    ECUnionSDK.login(mGameMainActivity, <span class="keyword">new</span> IECELoginResultListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(UserInfo userInfo)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;login onSuccess &quot;</span>);</span><br><span class="line">            <span class="comment">//返回的userInfo可能为空，部分SDK没登录功能就直接走成功回调。</span></span><br><span class="line">            String userId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            String userName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> != userInfo) &#123;</span><br><span class="line">                Log.i(TAG, userInfo.toString());</span><br><span class="line">                <span class="keyword">if</span> (!TextUtils.isEmpty(userInfo.getUserId())) &#123;</span><br><span class="line">                    userId = userInfo.getUserId();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!TextUtils.isEmpty(userInfo.getUserId())) &#123;</span><br><span class="line">                    userName = userInfo.getUserName();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//to do..  开始进入游戏。。</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(String errMsg)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;login onFailure errMsg=&quot;</span> + errMsg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-支付接口（选接）"><a href="#6-支付接口（选接）" class="headerlink" title="6 支付接口（选接）"></a>6 支付接口（选接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支付接口（选接）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PayInfo payInfo = <span class="keyword">new</span> PayInfo();</span><br><span class="line">    payInfo.setCpOrderId(<span class="string">&quot;&quot;</span>;<span class="comment">//接入方的订单号，必填。订单号务必保持唯一</span></span><br><span class="line">    payInfo.setPayCode(<span class="string">&quot;&quot;</span>);<span class="comment">//计费点，必填</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//客户端的支付回调不可靠，有掉单风险。</span></span><br><span class="line">    ECUnionSDK.pay(mGameMainActivity, payInfo, <span class="keyword">new</span> IECEPayResultListener() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(PaymentResultInfo paymentResultInfo)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;pay onSuccess &quot;</span> + paymentResultInfo.toString());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(String errMsg)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;pay onFailure errMsg=&quot;</span> + errMsg);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-补单接口（如果有支付必接）"><a href="#7-补单接口（如果有支付必接）" class="headerlink" title="7  补单接口（如果有支付必接）"></a>7  补单接口（如果有支付必接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//补单接口（如果有支付必接）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">checkMissingOrders</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ECUnionSDK.checkMissingOrders(mGameMainActivity, <span class="keyword">new</span> IMissingRewardResultListener() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(PaymentResultInfo paymentResultInfo)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;checkMissingOrders onSuccess &quot;</span> + paymentResultInfo.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(String errMsg)</span> </span>&#123;</span><br><span class="line">            Log.i(TAG, <span class="string">&quot;checkMissingOrders onFailure errMsg=&quot;</span> + errMsg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）"><a href="#8-跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）" class="headerlink" title="8  跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）"></a>8  跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//跳转到特定区域接口，比如：OPPO的超休闲专区（如有要求，请接入）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">jumpSpecialArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//只需要在跳转的位置调用即可</span></span><br><span class="line">    ECUnionSDK.jumpSpecialArea(mGameMainActivity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="9-上报用户游戏信息接口（如有要求，请接入）"><a href="#9-上报用户游戏信息接口（如有要求，请接入）" class="headerlink" title="9  上报用户游戏信息接口（如有要求，请接入）"></a>9  上报用户游戏信息接口（如有要求，请接入）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//上报用户游戏信息接口（如有要求，请接入）</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reportUserGameInfoData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        CP 可在玩家首次成功登陆游戏服务器，并选定游戏角色信息后，调用该接口，上传玩家初始角色</span></span><br><span class="line"><span class="comment">//        信息；为了确保即时性和准确性：</span></span><br><span class="line"><span class="comment">//         1、每次登陆进入游戏之后都要调用接口上报数据；</span></span><br><span class="line"><span class="comment">//         2、当游戏中角色信息任意一个发生变化时要立即调用接口上报数据</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//按游戏实际情况，传入参数</span></span><br><span class="line">        Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">        map.put(<span class="string">&quot;roleId&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//角色id</span></span><br><span class="line">        map.put(<span class="string">&quot;roleName&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//角色昵称</span></span><br><span class="line">        map.put(<span class="string">&quot;roleLevel&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//角色等级</span></span><br><span class="line">        map.put(<span class="string">&quot;areaId&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//区服id</span></span><br><span class="line">        map.put(<span class="string">&quot;areaName&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//区服名称</span></span><br><span class="line">        map.put(<span class="string">&quot;chapter&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//关卡章节</span></span><br><span class="line">        map.put(<span class="string">&quot;combatValue&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//战力值，有战力值的网游必须上传，活动工具需要根据战力值评估</span></span><br><span class="line">        map.put(<span class="string">&quot;pointValue&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//积分值，捕鱼或棋牌类休闲游戏参与比赛的积分必须上传，如果暂无积分值，游戏可自行设置积分值并上传。</span></span><br><span class="line">        ECUnionSDK.reportUserGameInfoData(mGameMainActivity, map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-自定义计数事件统计接口（选接）"><a href="#10-自定义计数事件统计接口（选接）" class="headerlink" title="10  自定义计数事件统计接口（选接）"></a>10  自定义计数事件统计接口（选接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用。</span><br><span class="line">注意：</span><br><span class="line">自定义事件ID,需要跟后台创建的事件ID一致。</span><br><span class="line">事件ID或者map的key请使用（英文、数字、下划线、中划线、小数点及加号）进行定义，建议加上前缀，防止跟关键字冲突。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">onEventObject</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//事件ID,建议加上前缀，防止跟关键字冲突，需要跟后台创建的事件ID一致。</span></span><br><span class="line">    String eventId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">//对当前事件的属性描述，定义为“属性名:属性值”的HashMap“&lt;键-值&gt;对”。</span></span><br><span class="line">    <span class="comment">//如果事件不需要属性，传递null即可。(属性值目前仅支持以下数据类型: String，Integer，Long，Short，Float，Double)</span></span><br><span class="line">    <span class="comment">//key建议加上前缀，防止跟关键字冲突。</span></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计数事件统计</span></span><br><span class="line">    ECUnionSDK.onEventObject(mGameMainActivity, eventId, map);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="11-自定义计算事件统计接口（选接）"><a href="#11-自定义计算事件统计接口（选接）" class="headerlink" title="11  自定义计算事件统计接口（选接）"></a>11  自定义计算事件统计接口（选接）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在主activity添加以下接口使用。</span><br><span class="line">注意：</span><br><span class="line">自定义事件ID,需要跟后台创建的事件ID一致。</span><br><span class="line">事件ID或者map的key请使用（英文、数字、下划线、中划线、小数点及加号）进行定义，建议加上前缀，防止跟关键字冲突。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">onEventValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//事件ID，建议加上前缀，防止跟关键字冲突，需要跟后台创建的事件ID一致。</span></span><br><span class="line">    String eventId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">//为当前事件的属性和取值（Key-Value键值对），可选，键值的数据类型都是string</span></span><br><span class="line">    <span class="comment">//key建议加上前缀，防止跟关键字冲突。</span></span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    <span class="comment">//当前事件的数值，取值范围是-2,147,483,648 到 +2,147,483,647 之间的</span></span><br><span class="line">    <span class="comment">//有符号整数，即int 32类型，如果数据超出了该范围，会造成数据丢包，</span></span><br><span class="line">    <span class="comment">//影响数据统计的准确性。</span></span><br><span class="line">    <span class="keyword">int</span> du = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计算事件统计</span></span><br><span class="line">    ECUnionSDK.onEventValue(mGameMainActivity, eventId, map, du);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

        </div>
        
    </article>
</div>
<div class="paginator">
    
        
        
            <a class="next" href="/2020/11/21/ECUnionDoc_1.0.7.07/">
                <span class="nav-default"></span>
                <span class="nav-mobile">下一篇</span>
                <i class="iconfont icon-next"></i>
            </a>
        
    
</div>
<div id="comment-container"></div>
    </div>
</div>
<footer class="footer-social">
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2020
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://www.baidu.com">ECUnionSDKDev</a>
        </p>
        <p class="theme-info">
            Powered by <a target="_blank" href="https://baidu.com">ECUnion</a>  | 
            <a target="_blank" href="https://www.baidu.com">ECUnionSDK</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
